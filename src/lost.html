<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details</title>
    <link rel="stylesheet" href="sty.css">
</head>

<body>
    <div class="container">
        <div class="main-content">
            <h1 class="item-title">
                Example Item Title <span class="item-status">Lost</span>
            </h1>
            <div class="item-meta">
                <span>01/01/2024</span> •
                <span>Example Location</span> •
                <span>105 Views</span>
                <span>Reference: EX12345</span>
            </div>

            <img src="images/ganga-arti.jpeg" alt="Placeholder" class="item-image">

            <div class="listing-details">
                <h3>Details</h3>
                <div class="detail-row">
                    <span class="detail-label">Location:</span>
                    <span>Example Location</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Description:</span>
                    <span>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sequi suscipit unde atque tempore commodi culpa harum assumenda vel possimus soluta repellat, adipisci hic facere mollitia earum. Recusandae sit, fugiat cupiditate in ipsam error eaque quidem autem, totam debitis illo itaque illum voluptatum repellat maxime culpa nostrum sed magnam maiores dolore delectus dolorem. Repudiandae voluptate quos facere numquam necessitatibus ratione, optio quas expedita, totam in repellat aliquam dolor. Exercitationem maxime modi fugiat mollitia quia non adipisci aliquam molestias aut minima nihil quae in cumque quisquam, quos ullam doloremque perferendis eos fugit. Aliquid deleniti ad dolorem ut a eius ex consequuntur cum?</span>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="user-info">
                <div class="user-name">Ajeet Kumar</div>
                <div>Joined 01/01/2024</div>
            </div>

            <button class="contact-button">Contact us</button>
            <button class="message-button">Send a message</button>

            <form id="claim-form">
                <input type="text" name="description" placeholder="Give a description of the item you claim" required>
                <input type="text" name="phone" placeholder="+91XXXXXXXXXX" required>
                <button type="submit">Submit Claim</button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('claim-form').addEventListener('submit', async function(event) {
            event.preventDefault();

            try {
                const response = await fetch('/lf/claim-item', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userid: 'EX12345',
                        description: document.querySelector('input[name="description"]').value,
                        phone: document.querySelector('input[name="phone"]').value
                    })
                });

                const result = await response.json();

                if (response.ok) {
                    alert('We will look into it shortly.');
                    window.location.href = '/lf/itemlist';
                } else {
                    alert('Error: ' + result.message);
                }
            } catch (error) {
                alert('Failed to submit the form. Please try again.');
            }
        });
    </script>
</body>

</html>
